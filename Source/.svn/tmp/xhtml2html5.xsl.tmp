<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:html="http://www.w3.org/1999/xhtml" 
                version="1.0"
                xmlns="http://www.w3.org/1999/xhtml"
                exclude-result-prefixes="html">

   <xsl:output method="xml" encoding="utf-8" omit-xml-declaration="yes" indent="yes"/>

   <xsl:variable name="doctype">
       <xsl:text>&lt;!DOCTYPE html&gt;</xsl:text>
   </xsl:variable>

	<xsl:template match="/">
       <xsl:value-of select="$doctype" disable-output-escaping="yes"/>
       <xsl:apply-templates select="node()"/>
   </xsl:template>

	<!-- custom CSS -->
	<xsl:template match="//html:link/@href">
       	<xsl:attribute name="html:href">
		    <xsl:value-of select="'css/base2.css'"/>
		  </xsl:attribute>	
   </xsl:template>

	<xsl:template match="//html:a[@class='idp1652720']">
   <xsl:text>AAAA</xsl:text>
  </xsl:template>

   <!-- Changing div class='header' to <header> -->
   <xsl:template match="html:div[@class='header']" priority="1">
       <xsl:element name="header">
	    	<xsl:apply-templates select="@*|node()"/>
	  </xsl:element>
   </xsl:template>

   <!-- Changing div class='nav' to <nav> -->
   <xsl:template match="html:div[@class='nav']" priority="1">
       <xsl:element name="nav">
           <xsl:apply-templates select="* | text()"/>
       </xsl:element>
   </xsl:template>

   <!-- Changing div class='article' to <article> -->
   <xsl:template match="html:div[@class='article']" priority="1">
       <xsl:element name="article">
           <xsl:apply-templates select="* | text()"/>
       </xsl:element>
   </xsl:template>

   <!-- Changing div class='section' to <section> -->
   <xsl:template match="html:div[@class='section']" priority="1">
       <xsl:element name="section">
           <xsl:apply-templates select="* | text()"/>
       </xsl:element>
   </xsl:template>

   <!-- Changing div class='aside' to <aside> -->
   <xsl:template match="html:div[@class='aside']" priority="1">
       <xsl:element name="aside">
           <xsl:apply-templates select="* | text()"/>
       </xsl:element>
   </xsl:template>

   <!-- Changing div class='footer' to <footer> -->
   <xsl:template match="html:div[@class='footer']" priority="1">
       <xsl:element name="footer">
           <xsl:apply-templates select="* | text()"/>
       </xsl:element>
   </xsl:template>

  <xsl:template match="html:dl">
      <xsl:element name="ul">
        <xsl:apply-templates select="* | text()"/> 
      </xsl:element>
  </xsl:template>
  
  <xsl:template match="html:dt">
      <xsl:element name="li">
        <xsl:apply-templates select="* | text()"/>        
      </xsl:element>
  </xsl:template>
  
  <xsl:template match="html:dd">
      <xsl:element name="ul">
        <xsl:apply-templates select="* | text()"/> 
      </xsl:element>
  </xsl:template>



	<!-- Replace obsolete align/valign attribute with class="align" -->
	<xsl:template match="html:*/@align[contains(.,'left')]">
	  <xsl:attribute name="class">
	    <xsl:value-of select="'align_left'"/>
	  </xsl:attribute>
	</xsl:template>
	<xsl:template match="//*/@valign[contains(.,'top')]">
	  <xsl:attribute name="class">
	    <xsl:value-of select="'vertical_align_top'"/>
	  </xsl:attribute>
	</xsl:template>

</xsl:stylesheet>